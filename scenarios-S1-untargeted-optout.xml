<?xml version="1.0" encoding="UTF-8"?>
<scenarios>
  <scenario feature="Subscription Opt-out test cases" title="Subscribed user sends optout keyword with active subscription">
    <Given>
      <step> Edit campaign "TelekomCampaign" begin on "10/10/2015 22:23:15" and ends on "10/11/2027 22:23:15" with langCode "sq"</step>
      <step-keywords>
        <keyword>10</keyword>
        <keyword>22</keyword>
        <keyword>23</keyword>
        <keyword>15</keyword>
        <keyword>edit</keyword>
        <keyword>campaign</keyword>
        <keyword>telekomcampaign</keyword>
        <keyword>begin</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>11</keyword>
        <keyword>2027</keyword>
        <keyword>langcod</keyword>
        <keyword>sq</keyword>
      </step-keywords>
      <step> Edit subscription "PersonalitySubscription" with id "PersonalitySubscription" starts on "01/01/2015 00:00:00" and ends on "01/01/2020 00:00:00" with "7" free days and welcome message from free shorcode</step>
      <step-keywords>
        <keyword>00</keyword>
        <keyword>01</keyword>
        <keyword>personalitysubscript</keyword>
        <keyword>free</keyword>
        <keyword>edit</keyword>
        <keyword>subscript</keyword>
        <keyword>id</keyword>
        <keyword>start</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>2020</keyword>
        <keyword>7</keyword>
        <keyword>dai</keyword>
        <keyword>welcom</keyword>
        <keyword>messag</keyword>
        <keyword>from</keyword>
        <keyword>shorcod</keyword>
      </step-keywords>
      <step> Sms free short code is "55577"</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>55577</keyword>
      </step-keywords>
      <step> User has "355004567822" msisdn</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>355004567822</keyword>
        <keyword>msisdn</keyword>
      </step-keywords>
    <step> User has no profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    </Given>
  <When>
      <step> User sends sms with input "YES" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>ye</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User sends sms with input "STOP" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>stop</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    </When>
  <Then>
      <step> User has profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User has subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User is unsubscribed in subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>unsubscrib</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> Sms is being processed by the "UNSUBSCRIBE" request</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>be</keyword>
        <keyword>process</keyword>
        <keyword>unsubscrib</keyword>
        <keyword>request</keyword>
      </step-keywords>
    <step> User receives the "RESPONSE_SUBSCRIPTION_SERVICE" reply from free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>respons</keyword>
        <keyword>subscript</keyword>
        <keyword>servic</keyword>
        <keyword>repli</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User receives the "subscription_1_unsubscribe" text from free short code for "RESPONSE_SUBSCRIPTION_SERVICE" reply</step>
      <step-keywords>
        <keyword>subscript</keyword>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>1</keyword>
        <keyword>unsubscrib</keyword>
        <keyword>text</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>respons</keyword>
        <keyword>servic</keyword>
        <keyword>repli</keyword>
      </step-keywords>
    <step> User does not get charged for the sms</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>doe</keyword>
        <keyword>get</keyword>
        <keyword>charg</keyword>
        <keyword>sm</keyword>
      </step-keywords>
    </Then>
  </scenario>
<scenario feature="Subscription Opt-out test cases" title="Subscribed user sends optout keyword alias with active subscription">
    <Given>
      <step> Edit campaign "TelekomCampaign" begin on "10/10/2015 22:23:15" and ends on "10/11/2027 22:23:15" with langCode "sq"</step>
      <step-keywords>
        <keyword>10</keyword>
        <keyword>22</keyword>
        <keyword>23</keyword>
        <keyword>15</keyword>
        <keyword>edit</keyword>
        <keyword>campaign</keyword>
        <keyword>telekomcampaign</keyword>
        <keyword>begin</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>11</keyword>
        <keyword>2027</keyword>
        <keyword>langcod</keyword>
        <keyword>sq</keyword>
      </step-keywords>
      <step> Edit subscription "PersonalitySubscription" with id "PersonalitySubscription" starts on "01/01/2015 00:00:00" and ends on "01/01/2020 00:00:00" with "7" free days and welcome message from free shorcode</step>
      <step-keywords>
        <keyword>00</keyword>
        <keyword>01</keyword>
        <keyword>personalitysubscript</keyword>
        <keyword>free</keyword>
        <keyword>edit</keyword>
        <keyword>subscript</keyword>
        <keyword>id</keyword>
        <keyword>start</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>2020</keyword>
        <keyword>7</keyword>
        <keyword>dai</keyword>
        <keyword>welcom</keyword>
        <keyword>messag</keyword>
        <keyword>from</keyword>
        <keyword>shorcod</keyword>
      </step-keywords>
      <step> Sms free short code is "55577"</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>55577</keyword>
      </step-keywords>
      <step> User has "355004567822" msisdn</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>355004567822</keyword>
        <keyword>msisdn</keyword>
      </step-keywords>
    <step> User has no profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    </Given>
  <When>
      <step> User sends sms with input "YES" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>ye</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User sends sms with input "QUIT" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>quit</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    </When>
  <Then>
      <step> User has profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User has subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User is unsubscribed in subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>unsubscrib</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> Sms is being processed by the "UNSUBSCRIBE" request</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>be</keyword>
        <keyword>process</keyword>
        <keyword>unsubscrib</keyword>
        <keyword>request</keyword>
      </step-keywords>
    <step> User receives the "RESPONSE_SUBSCRIPTION_SERVICE" reply from free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>respons</keyword>
        <keyword>subscript</keyword>
        <keyword>servic</keyword>
        <keyword>repli</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User receives the "subscription_1_unsubscribe" text from free short code for "RESPONSE_SUBSCRIPTION_SERVICE" reply</step>
      <step-keywords>
        <keyword>subscript</keyword>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>1</keyword>
        <keyword>unsubscrib</keyword>
        <keyword>text</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>respons</keyword>
        <keyword>servic</keyword>
        <keyword>repli</keyword>
      </step-keywords>
    <step> User does not get charged for the sms</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>doe</keyword>
        <keyword>get</keyword>
        <keyword>charg</keyword>
        <keyword>sm</keyword>
      </step-keywords>
    </Then>
  </scenario>
<scenario feature="Subscription Opt-out test cases" title="Subscribed user sends optout keyword alias (regex) with active subscription">
    <Given>
      <step> Edit campaign "TelekomCampaign" begin on "10/10/2015 22:23:15" and ends on "10/11/2027 22:23:15" with langCode "sq"</step>
      <step-keywords>
        <keyword>10</keyword>
        <keyword>22</keyword>
        <keyword>23</keyword>
        <keyword>15</keyword>
        <keyword>edit</keyword>
        <keyword>campaign</keyword>
        <keyword>telekomcampaign</keyword>
        <keyword>begin</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>11</keyword>
        <keyword>2027</keyword>
        <keyword>langcod</keyword>
        <keyword>sq</keyword>
      </step-keywords>
      <step> Edit subscription "PersonalitySubscription" with id "PersonalitySubscription" starts on "01/01/2015 00:00:00" and ends on "01/01/2020 00:00:00" with "7" free days and welcome message from free shorcode</step>
      <step-keywords>
        <keyword>00</keyword>
        <keyword>01</keyword>
        <keyword>personalitysubscript</keyword>
        <keyword>free</keyword>
        <keyword>edit</keyword>
        <keyword>subscript</keyword>
        <keyword>id</keyword>
        <keyword>start</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>2020</keyword>
        <keyword>7</keyword>
        <keyword>dai</keyword>
        <keyword>welcom</keyword>
        <keyword>messag</keyword>
        <keyword>from</keyword>
        <keyword>shorcod</keyword>
      </step-keywords>
      <step> Sms free short code is "55577"</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>55577</keyword>
      </step-keywords>
      <step> User has "355004567822" msisdn</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>355004567822</keyword>
        <keyword>msisdn</keyword>
      </step-keywords>
    <step> User has no profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    </Given>
  <When>
      <step> User sends sms with input "YES" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>ye</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User sends sms with input "HellOAndoFfTbarboutsala" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>helloandofftbarboutsala</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    </When>
  <Then>
      <step> User has profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User has subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User is unsubscribed in subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>unsubscrib</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> Sms is being processed by the "UNSUBSCRIBE" request</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>be</keyword>
        <keyword>process</keyword>
        <keyword>unsubscrib</keyword>
        <keyword>request</keyword>
      </step-keywords>
    <step> User receives the "RESPONSE_SUBSCRIPTION_SERVICE" reply from free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>respons</keyword>
        <keyword>subscript</keyword>
        <keyword>servic</keyword>
        <keyword>repli</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User receives the "subscription_1_unsubscribe" text from free short code for "RESPONSE_SUBSCRIPTION_SERVICE" reply</step>
      <step-keywords>
        <keyword>subscript</keyword>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>1</keyword>
        <keyword>unsubscrib</keyword>
        <keyword>text</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>respons</keyword>
        <keyword>servic</keyword>
        <keyword>repli</keyword>
      </step-keywords>
    <step> User does not get charged for the sms</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>doe</keyword>
        <keyword>get</keyword>
        <keyword>charg</keyword>
        <keyword>sm</keyword>
      </step-keywords>
    </Then>
  </scenario>
<scenario feature="Subscription Opt-out test cases" title="Unsubscribed user sends optout keyword with active subscription">
    <Given>
      <step> Edit campaign "TelekomCampaign" begin on "10/10/2015 22:23:15" and ends on "10/11/2027 22:23:15" with langCode "sq"</step>
      <step-keywords>
        <keyword>10</keyword>
        <keyword>22</keyword>
        <keyword>23</keyword>
        <keyword>15</keyword>
        <keyword>edit</keyword>
        <keyword>campaign</keyword>
        <keyword>telekomcampaign</keyword>
        <keyword>begin</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>11</keyword>
        <keyword>2027</keyword>
        <keyword>langcod</keyword>
        <keyword>sq</keyword>
      </step-keywords>
      <step> Edit subscription "PersonalitySubscription" with id "PersonalitySubscription" starts on "01/01/2015 00:00:00" and ends on "01/01/2020 00:00:00" with "7" free days and welcome message from free shorcode</step>
      <step-keywords>
        <keyword>00</keyword>
        <keyword>01</keyword>
        <keyword>personalitysubscript</keyword>
        <keyword>free</keyword>
        <keyword>edit</keyword>
        <keyword>subscript</keyword>
        <keyword>id</keyword>
        <keyword>start</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>2020</keyword>
        <keyword>7</keyword>
        <keyword>dai</keyword>
        <keyword>welcom</keyword>
        <keyword>messag</keyword>
        <keyword>from</keyword>
        <keyword>shorcod</keyword>
      </step-keywords>
      <step> Sms free short code is "55577"</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>55577</keyword>
      </step-keywords>
      <step> User has "355004567823" msisdn</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>355004567823</keyword>
        <keyword>msisdn</keyword>
      </step-keywords>
    <step> User has no profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    </Given>
  <When>
      <step> User sends sms with input "YES" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>ye</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User sends sms with input "STOP" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>stop</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User sends sms with input "STOP" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>stop</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    </When>
  <Then>
      <step> User has profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User has subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User is unsubscribed in subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>unsubscrib</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> Sms is being processed by the "UNSUBSCRIBE" request</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>be</keyword>
        <keyword>process</keyword>
        <keyword>unsubscrib</keyword>
        <keyword>request</keyword>
      </step-keywords>
    <step> User receives the "RESPONSE_SUBSCRIPTION_SERVICE" reply from free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>respons</keyword>
        <keyword>subscript</keyword>
        <keyword>servic</keyword>
        <keyword>repli</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User receives the "subscription_1_unsubscribe" text from free short code for "RESPONSE_SUBSCRIPTION_SERVICE" reply</step>
      <step-keywords>
        <keyword>subscript</keyword>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>1</keyword>
        <keyword>unsubscrib</keyword>
        <keyword>text</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>respons</keyword>
        <keyword>servic</keyword>
        <keyword>repli</keyword>
      </step-keywords>
    <step> User does not get charged for the sms</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>doe</keyword>
        <keyword>get</keyword>
        <keyword>charg</keyword>
        <keyword>sm</keyword>
      </step-keywords>
    <step> User is unsubscribed in subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>unsubscrib</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> Sms is being processed by the "UNSUBSCRIBE" request</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>be</keyword>
        <keyword>process</keyword>
        <keyword>unsubscrib</keyword>
        <keyword>request</keyword>
      </step-keywords>
    <step> User receives the "RESPONSE_SUBSCRIPTION_SERVICE" reply from free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>respons</keyword>
        <keyword>subscript</keyword>
        <keyword>servic</keyword>
        <keyword>repli</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User receives the "subscription_1_already_unsubscribed" text from free short code for "RESPONSE_SUBSCRIPTION_SERVICE" reply</step>
      <step-keywords>
        <keyword>subscript</keyword>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>1</keyword>
        <keyword>alreadi</keyword>
        <keyword>unsubscrib</keyword>
        <keyword>text</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>respons</keyword>
        <keyword>servic</keyword>
        <keyword>repli</keyword>
      </step-keywords>
    <step> User does not get charged for the sms</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>doe</keyword>
        <keyword>get</keyword>
        <keyword>charg</keyword>
        <keyword>sm</keyword>
      </step-keywords>
    </Then>
  </scenario>
<scenario feature="Subscription Opt-out test cases" title="Blacklisted user sends optout keyword with active subscription">
    <Given>
      <step> Edit campaign "TelekomCampaign" begin on "10/10/2015 22:23:15" and ends on "10/11/2027 22:23:15" with langCode "sq"</step>
      <step-keywords>
        <keyword>10</keyword>
        <keyword>22</keyword>
        <keyword>23</keyword>
        <keyword>15</keyword>
        <keyword>edit</keyword>
        <keyword>campaign</keyword>
        <keyword>telekomcampaign</keyword>
        <keyword>begin</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>11</keyword>
        <keyword>2027</keyword>
        <keyword>langcod</keyword>
        <keyword>sq</keyword>
      </step-keywords>
      <step> Edit subscription "PersonalitySubscription" with id "PersonalitySubscription" starts on "01/01/2015 00:00:00" and ends on "01/01/2020 00:00:00" with "7" free days and welcome message from free shorcode</step>
      <step-keywords>
        <keyword>00</keyword>
        <keyword>01</keyword>
        <keyword>personalitysubscript</keyword>
        <keyword>free</keyword>
        <keyword>edit</keyword>
        <keyword>subscript</keyword>
        <keyword>id</keyword>
        <keyword>start</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>2020</keyword>
        <keyword>7</keyword>
        <keyword>dai</keyword>
        <keyword>welcom</keyword>
        <keyword>messag</keyword>
        <keyword>from</keyword>
        <keyword>shorcod</keyword>
      </step-keywords>
      <step> Sms free short code is "55577"</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>55577</keyword>
      </step-keywords>
      <step> User has "355004567824" msisdn</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>355004567824</keyword>
        <keyword>msisdn</keyword>
      </step-keywords>
    <step> User has no profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    </Given>
  <When>
      <step> User sends sms with input "YES" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>ye</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User is blacklisted</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>blacklist</keyword>
      </step-keywords>
    </When>
  <Then>
      <step> User has profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User sends sms with input "STOP" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>stop</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User has subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> Sms is being processed by the "BLACKLISTED" request</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>be</keyword>
        <keyword>process</keyword>
        <keyword>blacklist</keyword>
        <keyword>request</keyword>
      </step-keywords>
    <step> User receives the "BLACKLISTED" reply from free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>blacklist</keyword>
        <keyword>repli</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User receives the "text_key_blacklisted" text from free short code for "BLACKLISTED" reply</step>
      <step-keywords>
        <keyword>text</keyword>
        <keyword>blacklist</keyword>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>kei</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>repli</keyword>
      </step-keywords>
    <step> User does not get charged for the sms</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>doe</keyword>
        <keyword>get</keyword>
        <keyword>charg</keyword>
        <keyword>sm</keyword>
      </step-keywords>
    <step> User is not blacklisted</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>blacklist</keyword>
      </step-keywords>
    </Then>
  </scenario>
<scenario feature="Subscription Opt-out test cases" title="Unsubscribed user sends HELP keyword with active subscription">
    <Given>
      <step> Edit campaign "TelekomCampaign" begin on "10/10/2015 22:23:15" and ends on "10/11/2027 22:23:15" with langCode "sq"</step>
      <step-keywords>
        <keyword>10</keyword>
        <keyword>22</keyword>
        <keyword>23</keyword>
        <keyword>15</keyword>
        <keyword>edit</keyword>
        <keyword>campaign</keyword>
        <keyword>telekomcampaign</keyword>
        <keyword>begin</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>11</keyword>
        <keyword>2027</keyword>
        <keyword>langcod</keyword>
        <keyword>sq</keyword>
      </step-keywords>
      <step> Edit subscription "PersonalitySubscription" with id "PersonalitySubscription" starts on "01/01/2015 00:00:00" and ends on "01/01/2020 00:00:00" with "7" free days and welcome message from free shorcode</step>
      <step-keywords>
        <keyword>00</keyword>
        <keyword>01</keyword>
        <keyword>personalitysubscript</keyword>
        <keyword>free</keyword>
        <keyword>edit</keyword>
        <keyword>subscript</keyword>
        <keyword>id</keyword>
        <keyword>start</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>2020</keyword>
        <keyword>7</keyword>
        <keyword>dai</keyword>
        <keyword>welcom</keyword>
        <keyword>messag</keyword>
        <keyword>from</keyword>
        <keyword>shorcod</keyword>
      </step-keywords>
      <step> Sms free short code is "55577"</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>55577</keyword>
      </step-keywords>
      <step> User has "355004567825" msisdn</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>355004567825</keyword>
        <keyword>msisdn</keyword>
      </step-keywords>
    <step> User has no profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    </Given>
  <When>
      <step> User sends sms with input "YES" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>ye</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User sends sms with input "STOP" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>stop</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User sends sms with input "HELP" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>help</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    </When>
  <Then>
      <step> User has profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User has subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User is unsubscribed in subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>unsubscrib</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> Sms is being processed by the "INVALID" request</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>be</keyword>
        <keyword>process</keyword>
        <keyword>invalid</keyword>
        <keyword>request</keyword>
      </step-keywords>
    <step> User receives the "RESPONSE_SUBSCRIPTION_SERVICE" reply from free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>respons</keyword>
        <keyword>subscript</keyword>
        <keyword>servic</keyword>
        <keyword>repli</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User receives the "subscription_1_invalid" text from free short code for "RESPONSE_SUBSCRIPTION_SERVICE" reply</step>
      <step-keywords>
        <keyword>subscript</keyword>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>1</keyword>
        <keyword>invalid</keyword>
        <keyword>text</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>respons</keyword>
        <keyword>servic</keyword>
        <keyword>repli</keyword>
      </step-keywords>
    </Then>
  </scenario>
<scenario feature="Subscription Opt-out test cases" title="Unsubscribed user sends SCORE keyword with active subscription">
    <Given>
      <step> Edit campaign "TelekomCampaign" begin on "10/10/2015 22:23:15" and ends on "10/11/2027 22:23:15" with langCode "sq"</step>
      <step-keywords>
        <keyword>10</keyword>
        <keyword>22</keyword>
        <keyword>23</keyword>
        <keyword>15</keyword>
        <keyword>edit</keyword>
        <keyword>campaign</keyword>
        <keyword>telekomcampaign</keyword>
        <keyword>begin</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>11</keyword>
        <keyword>2027</keyword>
        <keyword>langcod</keyword>
        <keyword>sq</keyword>
      </step-keywords>
      <step> Edit subscription "PersonalitySubscription" with id "PersonalitySubscription" starts on "01/01/2015 00:00:00" and ends on "01/01/2020 00:00:00" with "7" free days and welcome message from free shorcode</step>
      <step-keywords>
        <keyword>00</keyword>
        <keyword>01</keyword>
        <keyword>personalitysubscript</keyword>
        <keyword>free</keyword>
        <keyword>edit</keyword>
        <keyword>subscript</keyword>
        <keyword>id</keyword>
        <keyword>start</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>2020</keyword>
        <keyword>7</keyword>
        <keyword>dai</keyword>
        <keyword>welcom</keyword>
        <keyword>messag</keyword>
        <keyword>from</keyword>
        <keyword>shorcod</keyword>
      </step-keywords>
      <step> Sms free short code is "55577"</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>55577</keyword>
      </step-keywords>
      <step> User has "355004567826" msisdn</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>355004567826</keyword>
        <keyword>msisdn</keyword>
      </step-keywords>
    <step> User has no profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    </Given>
  <When>
      <step> User sends sms with input "YES" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>ye</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User sends sms with input "STOP" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>stop</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User sends sms with input "SCORE" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>score</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    </When>
  <Then>
      <step> User has profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User has subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User is unsubscribed in subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>unsubscrib</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> Sms is being processed by the "INVALID" request</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>be</keyword>
        <keyword>process</keyword>
        <keyword>invalid</keyword>
        <keyword>request</keyword>
      </step-keywords>
    <step> User receives the "RESPONSE_SUBSCRIPTION_SERVICE" reply from free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>respons</keyword>
        <keyword>subscript</keyword>
        <keyword>servic</keyword>
        <keyword>repli</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User receives the "subscription_1_invalid" text from free short code for "RESPONSE_SUBSCRIPTION_SERVICE" reply</step>
      <step-keywords>
        <keyword>subscript</keyword>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>1</keyword>
        <keyword>invalid</keyword>
        <keyword>text</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>respons</keyword>
        <keyword>servic</keyword>
        <keyword>repli</keyword>
      </step-keywords>
    </Then>
  </scenario>
<scenario feature="Subscription Opt-out test cases" title="Unsubscribed user sends YES keyword with active subscription">
    <Given>
      <step> Edit campaign "TelekomCampaign" begin on "10/10/2015 22:23:15" and ends on "10/11/2027 22:23:15" with langCode "sq"</step>
      <step-keywords>
        <keyword>10</keyword>
        <keyword>22</keyword>
        <keyword>23</keyword>
        <keyword>15</keyword>
        <keyword>edit</keyword>
        <keyword>campaign</keyword>
        <keyword>telekomcampaign</keyword>
        <keyword>begin</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>11</keyword>
        <keyword>2027</keyword>
        <keyword>langcod</keyword>
        <keyword>sq</keyword>
      </step-keywords>
      <step> Edit subscription "PersonalitySubscription" with id "PersonalitySubscription" starts on "01/01/2015 00:00:00" and ends on "01/01/2020 00:00:00" with "7" free days and welcome message from free shorcode</step>
      <step-keywords>
        <keyword>00</keyword>
        <keyword>01</keyword>
        <keyword>personalitysubscript</keyword>
        <keyword>free</keyword>
        <keyword>edit</keyword>
        <keyword>subscript</keyword>
        <keyword>id</keyword>
        <keyword>start</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>2020</keyword>
        <keyword>7</keyword>
        <keyword>dai</keyword>
        <keyword>welcom</keyword>
        <keyword>messag</keyword>
        <keyword>from</keyword>
        <keyword>shorcod</keyword>
      </step-keywords>
      <step> Sms free short code is "55577"</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>55577</keyword>
      </step-keywords>
      <step> User has "355004567827" msisdn</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>355004567827</keyword>
        <keyword>msisdn</keyword>
      </step-keywords>
    <step> User has no profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    </Given>
  <When>
      <step> User sends sms with input "YES" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>ye</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User sends sms with input "STOP" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>stop</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User sends sms with input "YES" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>ye</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    </When>
  <Then>
      <step> User has profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User has subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User is unsubscribed in subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>unsubscrib</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> Sms is being processed by the "ACTIVITY" request</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>be</keyword>
        <keyword>process</keyword>
        <keyword>activ</keyword>
        <keyword>request</keyword>
      </step-keywords>
    <step> User receives the following texts/response types from free short code ordered by event time:</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>follow</keyword>
        <keyword>text</keyword>
        <keyword>respons</keyword>
        <keyword>type</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>order</keyword>
        <keyword>event</keyword>
        <keyword>time</keyword>
      </step-keywords>
    </Then>
  </scenario>
<scenario feature="Subscription Opt-out test cases" title="Unsubscribed user sends anything with active subscription">
    <Given>
      <step> Edit campaign "TelekomCampaign" begin on "10/10/2015 22:23:15" and ends on "10/11/2027 22:23:15" with langCode "sq"</step>
      <step-keywords>
        <keyword>10</keyword>
        <keyword>22</keyword>
        <keyword>23</keyword>
        <keyword>15</keyword>
        <keyword>edit</keyword>
        <keyword>campaign</keyword>
        <keyword>telekomcampaign</keyword>
        <keyword>begin</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>11</keyword>
        <keyword>2027</keyword>
        <keyword>langcod</keyword>
        <keyword>sq</keyword>
      </step-keywords>
      <step> Edit subscription "PersonalitySubscription" with id "PersonalitySubscription" starts on "01/01/2015 00:00:00" and ends on "01/01/2020 00:00:00" with "7" free days and welcome message from free shorcode</step>
      <step-keywords>
        <keyword>00</keyword>
        <keyword>01</keyword>
        <keyword>personalitysubscript</keyword>
        <keyword>free</keyword>
        <keyword>edit</keyword>
        <keyword>subscript</keyword>
        <keyword>id</keyword>
        <keyword>start</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>2020</keyword>
        <keyword>7</keyword>
        <keyword>dai</keyword>
        <keyword>welcom</keyword>
        <keyword>messag</keyword>
        <keyword>from</keyword>
        <keyword>shorcod</keyword>
      </step-keywords>
      <step> Sms free short code is "55577"</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>55577</keyword>
      </step-keywords>
      <step> User has "355004567828" msisdn</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>355004567828</keyword>
        <keyword>msisdn</keyword>
      </step-keywords>
    <step> User has no profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    </Given>
  <When>
      <step> User sends sms with input "YES" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>ye</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User sends sms with input "STOP" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>stop</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User sends sms with input "ANYTHING" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>anyth</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    </When>
  <Then>
      <step> User has profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User has subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User is unsubscribed in subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>unsubscrib</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> Sms is being processed by the "ACTIVITY" request</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>be</keyword>
        <keyword>process</keyword>
        <keyword>activ</keyword>
        <keyword>request</keyword>
      </step-keywords>
    <step> User receives the following texts/response types from free short code ordered by event time:</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>follow</keyword>
        <keyword>text</keyword>
        <keyword>respons</keyword>
        <keyword>type</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>order</keyword>
        <keyword>event</keyword>
        <keyword>time</keyword>
      </step-keywords>
    </Then>
  </scenario>
<scenario feature="Subscription Opt-out test cases" title="Unsubscribed user sends &quot;1&quot; with active subscription">
    <Given>
      <step> Edit campaign "TelekomCampaign" begin on "10/10/2015 22:23:15" and ends on "10/11/2027 22:23:15" with langCode "sq"</step>
      <step-keywords>
        <keyword>10</keyword>
        <keyword>22</keyword>
        <keyword>23</keyword>
        <keyword>15</keyword>
        <keyword>edit</keyword>
        <keyword>campaign</keyword>
        <keyword>telekomcampaign</keyword>
        <keyword>begin</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>11</keyword>
        <keyword>2027</keyword>
        <keyword>langcod</keyword>
        <keyword>sq</keyword>
      </step-keywords>
      <step> Edit subscription "PersonalitySubscription" with id "PersonalitySubscription" starts on "01/01/2015 00:00:00" and ends on "01/01/2020 00:00:00" with "7" free days and welcome message from free shorcode</step>
      <step-keywords>
        <keyword>00</keyword>
        <keyword>01</keyword>
        <keyword>personalitysubscript</keyword>
        <keyword>free</keyword>
        <keyword>edit</keyword>
        <keyword>subscript</keyword>
        <keyword>id</keyword>
        <keyword>start</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>2020</keyword>
        <keyword>7</keyword>
        <keyword>dai</keyword>
        <keyword>welcom</keyword>
        <keyword>messag</keyword>
        <keyword>from</keyword>
        <keyword>shorcod</keyword>
      </step-keywords>
      <step> Sms free short code is "55577"</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>55577</keyword>
      </step-keywords>
      <step> User has "355004567840" msisdn</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>355004567840</keyword>
        <keyword>msisdn</keyword>
      </step-keywords>
    <step> User has no profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    </Given>
  <When>
      <step> User sends sms with input "YES" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>ye</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User sends sms with input "STOP" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>stop</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User sends sms with input "1" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>1</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    </When>
  <Then>
      <step> User has profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User has subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User is unsubscribed in subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>unsubscrib</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> Sms is being processed by the "UNSUBSCRIBED" request</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>be</keyword>
        <keyword>process</keyword>
        <keyword>unsubscrib</keyword>
        <keyword>request</keyword>
      </step-keywords>
    <step> User receives the "RESPONSE_SUBSCRIPTION_SERVICE" reply from free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>respons</keyword>
        <keyword>subscript</keyword>
        <keyword>servic</keyword>
        <keyword>repli</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User receives the "subscription_1_invalid" text from free short code for "RESPONSE_SUBSCRIPTION_SERVICE" reply</step>
      <step-keywords>
        <keyword>subscript</keyword>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>1</keyword>
        <keyword>invalid</keyword>
        <keyword>text</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>respons</keyword>
        <keyword>servic</keyword>
        <keyword>repli</keyword>
      </step-keywords>
    </Then>
  </scenario>
<scenario feature="Subscription Opt-out test cases" title="Unsubscribed user sends &quot;2&quot; with active subscription">
    <Given>
      <step> Edit campaign "TelekomCampaign" begin on "10/10/2015 22:23:15" and ends on "10/11/2027 22:23:15" with langCode "sq"</step>
      <step-keywords>
        <keyword>10</keyword>
        <keyword>22</keyword>
        <keyword>23</keyword>
        <keyword>15</keyword>
        <keyword>edit</keyword>
        <keyword>campaign</keyword>
        <keyword>telekomcampaign</keyword>
        <keyword>begin</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>11</keyword>
        <keyword>2027</keyword>
        <keyword>langcod</keyword>
        <keyword>sq</keyword>
      </step-keywords>
      <step> Edit subscription "PersonalitySubscription" with id "PersonalitySubscription" starts on "01/01/2015 00:00:00" and ends on "01/01/2020 00:00:00" with "7" free days and welcome message from free shorcode</step>
      <step-keywords>
        <keyword>00</keyword>
        <keyword>01</keyword>
        <keyword>personalitysubscript</keyword>
        <keyword>free</keyword>
        <keyword>edit</keyword>
        <keyword>subscript</keyword>
        <keyword>id</keyword>
        <keyword>start</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>2020</keyword>
        <keyword>7</keyword>
        <keyword>dai</keyword>
        <keyword>welcom</keyword>
        <keyword>messag</keyword>
        <keyword>from</keyword>
        <keyword>shorcod</keyword>
      </step-keywords>
      <step> Sms free short code is "55577"</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>55577</keyword>
      </step-keywords>
      <step> User has "355004567841" msisdn</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>355004567841</keyword>
        <keyword>msisdn</keyword>
      </step-keywords>
    <step> User has no profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    </Given>
  <When>
      <step> User sends sms with input "YES" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>ye</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User sends sms with input "STOP" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>stop</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User sends sms with input "2" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>2</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    </When>
  <Then>
      <step> User has profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User has subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User is unsubscribed in subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>unsubscrib</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> Sms is being processed by the "UNSUBSCRIBED" request</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>be</keyword>
        <keyword>process</keyword>
        <keyword>unsubscrib</keyword>
        <keyword>request</keyword>
      </step-keywords>
    <step> User receives the "RESPONSE_SUBSCRIPTION_SERVICE" reply from free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>respons</keyword>
        <keyword>subscript</keyword>
        <keyword>servic</keyword>
        <keyword>repli</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User receives the "subscription_1_invalid" text from free short code for "RESPONSE_SUBSCRIPTION_SERVICE" reply</step>
      <step-keywords>
        <keyword>subscript</keyword>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>1</keyword>
        <keyword>invalid</keyword>
        <keyword>text</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>respons</keyword>
        <keyword>servic</keyword>
        <keyword>repli</keyword>
      </step-keywords>
    </Then>
  </scenario>
<scenario feature="Subscription Opt-out test cases" title="No profile customer sends optout keyword with no active subscription">
    <Given>
      <step> Edit campaign "TelekomCampaign" begin on "10/10/2015 22:23:15" and ends on "10/11/2027 22:23:15" with langCode "sq"</step>
      <step-keywords>
        <keyword>10</keyword>
        <keyword>22</keyword>
        <keyword>23</keyword>
        <keyword>15</keyword>
        <keyword>edit</keyword>
        <keyword>campaign</keyword>
        <keyword>telekomcampaign</keyword>
        <keyword>begin</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>11</keyword>
        <keyword>2027</keyword>
        <keyword>langcod</keyword>
        <keyword>sq</keyword>
      </step-keywords>
      <step> Edit subscription "PersonalitySubscription" with id "PersonalitySubscription" starts on "01/01/2015 00:00:00" and ends on "01/01/2020 00:00:00" with "7" free days and welcome message from free shorcode</step>
      <step-keywords>
        <keyword>00</keyword>
        <keyword>01</keyword>
        <keyword>personalitysubscript</keyword>
        <keyword>free</keyword>
        <keyword>edit</keyword>
        <keyword>subscript</keyword>
        <keyword>id</keyword>
        <keyword>start</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>2020</keyword>
        <keyword>7</keyword>
        <keyword>dai</keyword>
        <keyword>welcom</keyword>
        <keyword>messag</keyword>
        <keyword>from</keyword>
        <keyword>shorcod</keyword>
      </step-keywords>
      <step> Sms free short code is "55577"</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>55577</keyword>
      </step-keywords>
      <step> User has "355004567831" msisdn</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>355004567831</keyword>
        <keyword>msisdn</keyword>
      </step-keywords>
    <step> User has no profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> Inactive subscription "PersonalitySubscription" with id "PersonalitySubscription" starts on "01/01/2015 00:00:00" and ends on "01/01/2020 00:00:00" with "0" free days and welcome message from free shorcode</step>
      <step-keywords>
        <keyword>00</keyword>
        <keyword>01</keyword>
        <keyword>personalitysubscript</keyword>
        <keyword>free</keyword>
        <keyword>inact</keyword>
        <keyword>subscript</keyword>
        <keyword>id</keyword>
        <keyword>start</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>2020</keyword>
        <keyword>0</keyword>
        <keyword>dai</keyword>
        <keyword>welcom</keyword>
        <keyword>messag</keyword>
        <keyword>from</keyword>
        <keyword>shorcod</keyword>
      </step-keywords>
    <step> Refresh cache</step>
      <step-keywords>
        <keyword>refresh</keyword>
        <keyword>cach</keyword>
      </step-keywords>
    </Given>
  <When>
      <step> User sends sms with input "STOP" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>stop</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    </When>
  <Then>
      <step> Sms is being processed by the "INVALID_REQUEST" request</step>
      <step-keywords>
        <keyword>request</keyword>
        <keyword>sm</keyword>
        <keyword>be</keyword>
        <keyword>process</keyword>
        <keyword>invalid</keyword>
      </step-keywords>
    <step> User receives the "INVALID_REQUEST" reply from free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>invalid</keyword>
        <keyword>request</keyword>
        <keyword>repli</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User receives the following texts/response types from free short code ordered by event time:</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>follow</keyword>
        <keyword>text</keyword>
        <keyword>respons</keyword>
        <keyword>type</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>order</keyword>
        <keyword>event</keyword>
        <keyword>time</keyword>
      </step-keywords>
    </Then>
  </scenario>
<scenario feature="Subscription Opt-out test cases" title="Subscribed user sends optout keyword with no active subscription">
    <Given>
      <step> Edit campaign "TelekomCampaign" begin on "10/10/2015 22:23:15" and ends on "10/11/2027 22:23:15" with langCode "sq"</step>
      <step-keywords>
        <keyword>10</keyword>
        <keyword>22</keyword>
        <keyword>23</keyword>
        <keyword>15</keyword>
        <keyword>edit</keyword>
        <keyword>campaign</keyword>
        <keyword>telekomcampaign</keyword>
        <keyword>begin</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>11</keyword>
        <keyword>2027</keyword>
        <keyword>langcod</keyword>
        <keyword>sq</keyword>
      </step-keywords>
      <step> Edit subscription "PersonalitySubscription" with id "PersonalitySubscription" starts on "01/01/2015 00:00:00" and ends on "01/01/2020 00:00:00" with "7" free days and welcome message from free shorcode</step>
      <step-keywords>
        <keyword>00</keyword>
        <keyword>01</keyword>
        <keyword>personalitysubscript</keyword>
        <keyword>free</keyword>
        <keyword>edit</keyword>
        <keyword>subscript</keyword>
        <keyword>id</keyword>
        <keyword>start</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>2020</keyword>
        <keyword>7</keyword>
        <keyword>dai</keyword>
        <keyword>welcom</keyword>
        <keyword>messag</keyword>
        <keyword>from</keyword>
        <keyword>shorcod</keyword>
      </step-keywords>
      <step> Sms free short code is "55577"</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>55577</keyword>
      </step-keywords>
      <step> User has "355004567832" msisdn</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>355004567832</keyword>
        <keyword>msisdn</keyword>
      </step-keywords>
    <step> User has no profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    </Given>
  <When>
      <step> User sends sms with input "YES" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>ye</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User sends sms with input "STOP" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>stop</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    </When>
  <Then>
      <step> User has profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User has subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> Inactive subscription "PersonalitySubscription" with id "PersonalitySubscription" starts on "01/01/2015 00:00:00" and ends on "01/01/2020 00:00:00" with "0" free days and welcome message from free shorcode</step>
      <step-keywords>
        <keyword>00</keyword>
        <keyword>01</keyword>
        <keyword>personalitysubscript</keyword>
        <keyword>free</keyword>
        <keyword>inact</keyword>
        <keyword>subscript</keyword>
        <keyword>id</keyword>
        <keyword>start</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>2020</keyword>
        <keyword>0</keyword>
        <keyword>dai</keyword>
        <keyword>welcom</keyword>
        <keyword>messag</keyword>
        <keyword>from</keyword>
        <keyword>shorcod</keyword>
      </step-keywords>
    <step> Refresh cache</step>
      <step-keywords>
        <keyword>refresh</keyword>
        <keyword>cach</keyword>
      </step-keywords>
    <step> Sms is being processed by the "INVALID_REQUEST" request</step>
      <step-keywords>
        <keyword>request</keyword>
        <keyword>sm</keyword>
        <keyword>be</keyword>
        <keyword>process</keyword>
        <keyword>invalid</keyword>
      </step-keywords>
    <step> User receives the "INVALID_REQUEST" reply from free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>invalid</keyword>
        <keyword>request</keyword>
        <keyword>repli</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User receives the following texts/response types from free short code ordered by event time:</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>follow</keyword>
        <keyword>text</keyword>
        <keyword>respons</keyword>
        <keyword>type</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>order</keyword>
        <keyword>event</keyword>
        <keyword>time</keyword>
      </step-keywords>
    </Then>
  </scenario>
<scenario feature="Subscription Opt-out test cases" title="Unsubscribed user sends optout keyword with no active subscription">
    <Given>
      <step> Edit campaign "TelekomCampaign" begin on "10/10/2015 22:23:15" and ends on "10/11/2027 22:23:15" with langCode "sq"</step>
      <step-keywords>
        <keyword>10</keyword>
        <keyword>22</keyword>
        <keyword>23</keyword>
        <keyword>15</keyword>
        <keyword>edit</keyword>
        <keyword>campaign</keyword>
        <keyword>telekomcampaign</keyword>
        <keyword>begin</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>11</keyword>
        <keyword>2027</keyword>
        <keyword>langcod</keyword>
        <keyword>sq</keyword>
      </step-keywords>
      <step> Edit subscription "PersonalitySubscription" with id "PersonalitySubscription" starts on "01/01/2015 00:00:00" and ends on "01/01/2020 00:00:00" with "7" free days and welcome message from free shorcode</step>
      <step-keywords>
        <keyword>00</keyword>
        <keyword>01</keyword>
        <keyword>personalitysubscript</keyword>
        <keyword>free</keyword>
        <keyword>edit</keyword>
        <keyword>subscript</keyword>
        <keyword>id</keyword>
        <keyword>start</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>2020</keyword>
        <keyword>7</keyword>
        <keyword>dai</keyword>
        <keyword>welcom</keyword>
        <keyword>messag</keyword>
        <keyword>from</keyword>
        <keyword>shorcod</keyword>
      </step-keywords>
      <step> Sms free short code is "55577"</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>55577</keyword>
      </step-keywords>
      <step> User has "355004567833" msisdn</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>355004567833</keyword>
        <keyword>msisdn</keyword>
      </step-keywords>
    <step> User has no profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    </Given>
  <When>
      <step> User sends sms with input "YES" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>ye</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User sends sms with input "STOP" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>stop</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User sends sms with input "STOP" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>stop</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    </When>
  <Then>
      <step> User has profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User has subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User is unsubscribed in subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>unsubscrib</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> Sms is being processed by the "UNSUBSCRIBE" request</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>be</keyword>
        <keyword>process</keyword>
        <keyword>unsubscrib</keyword>
        <keyword>request</keyword>
      </step-keywords>
    <step> User receives the "RESPONSE_SUBSCRIPTION_SERVICE" reply from free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>respons</keyword>
        <keyword>subscript</keyword>
        <keyword>servic</keyword>
        <keyword>repli</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User receives the "subscription_1_unsubscribe" text from free short code for "RESPONSE_SUBSCRIPTION_SERVICE" reply</step>
      <step-keywords>
        <keyword>subscript</keyword>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>1</keyword>
        <keyword>unsubscrib</keyword>
        <keyword>text</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>respons</keyword>
        <keyword>servic</keyword>
        <keyword>repli</keyword>
      </step-keywords>
    <step> User does not get charged for the sms</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>doe</keyword>
        <keyword>get</keyword>
        <keyword>charg</keyword>
        <keyword>sm</keyword>
      </step-keywords>
    <step> Inactive subscription "PersonalitySubscription" with id "PersonalitySubscription" starts on "01/01/2015 00:00:00" and ends on "01/01/2020 00:00:00" with "0" free days and welcome message from free shorcode</step>
      <step-keywords>
        <keyword>00</keyword>
        <keyword>01</keyword>
        <keyword>personalitysubscript</keyword>
        <keyword>free</keyword>
        <keyword>inact</keyword>
        <keyword>subscript</keyword>
        <keyword>id</keyword>
        <keyword>start</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>2020</keyword>
        <keyword>0</keyword>
        <keyword>dai</keyword>
        <keyword>welcom</keyword>
        <keyword>messag</keyword>
        <keyword>from</keyword>
        <keyword>shorcod</keyword>
      </step-keywords>
    <step> Refresh cache</step>
      <step-keywords>
        <keyword>refresh</keyword>
        <keyword>cach</keyword>
      </step-keywords>
    <step> Sms is being processed by the "INVALID_REQUEST" request</step>
      <step-keywords>
        <keyword>request</keyword>
        <keyword>sm</keyword>
        <keyword>be</keyword>
        <keyword>process</keyword>
        <keyword>invalid</keyword>
      </step-keywords>
    <step> User receives the "INVALID_REQUEST" reply from free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>invalid</keyword>
        <keyword>request</keyword>
        <keyword>repli</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User receives the following texts/response types from free short code ordered by event time:</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>follow</keyword>
        <keyword>text</keyword>
        <keyword>respons</keyword>
        <keyword>type</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>order</keyword>
        <keyword>event</keyword>
        <keyword>time</keyword>
      </step-keywords>
    </Then>
  </scenario>
<scenario feature="Subscription Opt-out test cases" title="Blacklisted user sends optout keyword with no active subscription">
    <Given>
      <step> Edit campaign "TelekomCampaign" begin on "10/10/2015 22:23:15" and ends on "10/11/2027 22:23:15" with langCode "sq"</step>
      <step-keywords>
        <keyword>10</keyword>
        <keyword>22</keyword>
        <keyword>23</keyword>
        <keyword>15</keyword>
        <keyword>edit</keyword>
        <keyword>campaign</keyword>
        <keyword>telekomcampaign</keyword>
        <keyword>begin</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>11</keyword>
        <keyword>2027</keyword>
        <keyword>langcod</keyword>
        <keyword>sq</keyword>
      </step-keywords>
      <step> Edit subscription "PersonalitySubscription" with id "PersonalitySubscription" starts on "01/01/2015 00:00:00" and ends on "01/01/2020 00:00:00" with "7" free days and welcome message from free shorcode</step>
      <step-keywords>
        <keyword>00</keyword>
        <keyword>01</keyword>
        <keyword>personalitysubscript</keyword>
        <keyword>free</keyword>
        <keyword>edit</keyword>
        <keyword>subscript</keyword>
        <keyword>id</keyword>
        <keyword>start</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>2020</keyword>
        <keyword>7</keyword>
        <keyword>dai</keyword>
        <keyword>welcom</keyword>
        <keyword>messag</keyword>
        <keyword>from</keyword>
        <keyword>shorcod</keyword>
      </step-keywords>
      <step> Sms free short code is "55577"</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>55577</keyword>
      </step-keywords>
      <step> User has "355004567834" msisdn</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>355004567834</keyword>
        <keyword>msisdn</keyword>
      </step-keywords>
    <step> User has no profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    </Given>
  <When>
      <step> User sends sms with input "YES" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>ye</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User is blacklisted</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>blacklist</keyword>
      </step-keywords>
    </When>
  <Then>
      <step> User has profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> Inactive subscription "PersonalitySubscription" with id "PersonalitySubscription" starts on "01/01/2015 00:00:00" and ends on "01/01/2020 00:00:00" with "0" free days and welcome message from free shorcode</step>
      <step-keywords>
        <keyword>00</keyword>
        <keyword>01</keyword>
        <keyword>personalitysubscript</keyword>
        <keyword>free</keyword>
        <keyword>inact</keyword>
        <keyword>subscript</keyword>
        <keyword>id</keyword>
        <keyword>start</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>2020</keyword>
        <keyword>0</keyword>
        <keyword>dai</keyword>
        <keyword>welcom</keyword>
        <keyword>messag</keyword>
        <keyword>from</keyword>
        <keyword>shorcod</keyword>
      </step-keywords>
    <step> Refresh cache</step>
      <step-keywords>
        <keyword>refresh</keyword>
        <keyword>cach</keyword>
      </step-keywords>
    <step> User sends sms with input "STOP" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>stop</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User has subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> Sms is being processed by the "BLACKLISTED" request</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>be</keyword>
        <keyword>process</keyword>
        <keyword>blacklist</keyword>
        <keyword>request</keyword>
      </step-keywords>
    <step> User receives the "BLACKLISTED" reply from free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>blacklist</keyword>
        <keyword>repli</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User receives the following texts/response types from free short code ordered by event time:</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>follow</keyword>
        <keyword>text</keyword>
        <keyword>respons</keyword>
        <keyword>type</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>order</keyword>
        <keyword>event</keyword>
        <keyword>time</keyword>
      </step-keywords>
    <step> User is blacklisted</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>blacklist</keyword>
      </step-keywords>
    </Then>
  </scenario>
<scenario feature="Subscription Opt-out test cases" title="Unsubscribed user sends HELP keyword with no active subscription">
    <Given>
      <step> Edit campaign "TelekomCampaign" begin on "10/10/2015 22:23:15" and ends on "10/11/2027 22:23:15" with langCode "sq"</step>
      <step-keywords>
        <keyword>10</keyword>
        <keyword>22</keyword>
        <keyword>23</keyword>
        <keyword>15</keyword>
        <keyword>edit</keyword>
        <keyword>campaign</keyword>
        <keyword>telekomcampaign</keyword>
        <keyword>begin</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>11</keyword>
        <keyword>2027</keyword>
        <keyword>langcod</keyword>
        <keyword>sq</keyword>
      </step-keywords>
      <step> Edit subscription "PersonalitySubscription" with id "PersonalitySubscription" starts on "01/01/2015 00:00:00" and ends on "01/01/2020 00:00:00" with "7" free days and welcome message from free shorcode</step>
      <step-keywords>
        <keyword>00</keyword>
        <keyword>01</keyword>
        <keyword>personalitysubscript</keyword>
        <keyword>free</keyword>
        <keyword>edit</keyword>
        <keyword>subscript</keyword>
        <keyword>id</keyword>
        <keyword>start</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>2020</keyword>
        <keyword>7</keyword>
        <keyword>dai</keyword>
        <keyword>welcom</keyword>
        <keyword>messag</keyword>
        <keyword>from</keyword>
        <keyword>shorcod</keyword>
      </step-keywords>
      <step> Sms free short code is "55577"</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>55577</keyword>
      </step-keywords>
      <step> User has "355004567835" msisdn</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>355004567835</keyword>
        <keyword>msisdn</keyword>
      </step-keywords>
    <step> User has no profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    </Given>
  <When>
      <step> User sends sms with input "YES" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>ye</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User sends sms with input "STOP" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>stop</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> Inactive subscription "PersonalitySubscription" with id "PersonalitySubscription" starts on "01/01/2015 00:00:00" and ends on "01/01/2020 00:00:00" with "0" free days and welcome message from free shorcode</step>
      <step-keywords>
        <keyword>00</keyword>
        <keyword>01</keyword>
        <keyword>personalitysubscript</keyword>
        <keyword>free</keyword>
        <keyword>inact</keyword>
        <keyword>subscript</keyword>
        <keyword>id</keyword>
        <keyword>start</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>2020</keyword>
        <keyword>0</keyword>
        <keyword>dai</keyword>
        <keyword>welcom</keyword>
        <keyword>messag</keyword>
        <keyword>from</keyword>
        <keyword>shorcod</keyword>
      </step-keywords>
    <step> User sends sms with input "HELP" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>help</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    </When>
  <Then>
      <step> User has profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User has subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User is unsubscribed in subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>unsubscrib</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> Refresh cache</step>
      <step-keywords>
        <keyword>refresh</keyword>
        <keyword>cach</keyword>
      </step-keywords>
    <step> Sms is being processed by the "INVALID_REQUEST" request</step>
      <step-keywords>
        <keyword>request</keyword>
        <keyword>sm</keyword>
        <keyword>be</keyword>
        <keyword>process</keyword>
        <keyword>invalid</keyword>
      </step-keywords>
    <step> User receives the "INVALID_REQUEST" reply from free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>invalid</keyword>
        <keyword>request</keyword>
        <keyword>repli</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User receives the following texts/response types from free short code ordered by event time:</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>follow</keyword>
        <keyword>text</keyword>
        <keyword>respons</keyword>
        <keyword>type</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>order</keyword>
        <keyword>event</keyword>
        <keyword>time</keyword>
      </step-keywords>
    </Then>
  </scenario>
<scenario feature="Subscription Opt-out test cases" title="Unsubscribed user sends SCORE keyword with no active subscription">
    <Given>
      <step> Edit campaign "TelekomCampaign" begin on "10/10/2015 22:23:15" and ends on "10/11/2027 22:23:15" with langCode "sq"</step>
      <step-keywords>
        <keyword>10</keyword>
        <keyword>22</keyword>
        <keyword>23</keyword>
        <keyword>15</keyword>
        <keyword>edit</keyword>
        <keyword>campaign</keyword>
        <keyword>telekomcampaign</keyword>
        <keyword>begin</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>11</keyword>
        <keyword>2027</keyword>
        <keyword>langcod</keyword>
        <keyword>sq</keyword>
      </step-keywords>
      <step> Edit subscription "PersonalitySubscription" with id "PersonalitySubscription" starts on "01/01/2015 00:00:00" and ends on "01/01/2020 00:00:00" with "7" free days and welcome message from free shorcode</step>
      <step-keywords>
        <keyword>00</keyword>
        <keyword>01</keyword>
        <keyword>personalitysubscript</keyword>
        <keyword>free</keyword>
        <keyword>edit</keyword>
        <keyword>subscript</keyword>
        <keyword>id</keyword>
        <keyword>start</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>2020</keyword>
        <keyword>7</keyword>
        <keyword>dai</keyword>
        <keyword>welcom</keyword>
        <keyword>messag</keyword>
        <keyword>from</keyword>
        <keyword>shorcod</keyword>
      </step-keywords>
      <step> Sms free short code is "55577"</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>55577</keyword>
      </step-keywords>
      <step> User has "355004567836" msisdn</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>355004567836</keyword>
        <keyword>msisdn</keyword>
      </step-keywords>
    <step> User has no profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    </Given>
  <When>
      <step> User sends sms with input "YES" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>ye</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User sends sms with input "STOP" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>stop</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> Inactive subscription "PersonalitySubscription" with id "PersonalitySubscription" starts on "01/01/2015 00:00:00" and ends on "01/01/2020 00:00:00" with "0" free days and welcome message from free shorcode</step>
      <step-keywords>
        <keyword>00</keyword>
        <keyword>01</keyword>
        <keyword>personalitysubscript</keyword>
        <keyword>free</keyword>
        <keyword>inact</keyword>
        <keyword>subscript</keyword>
        <keyword>id</keyword>
        <keyword>start</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>2020</keyword>
        <keyword>0</keyword>
        <keyword>dai</keyword>
        <keyword>welcom</keyword>
        <keyword>messag</keyword>
        <keyword>from</keyword>
        <keyword>shorcod</keyword>
      </step-keywords>
    <step> User sends sms with input "SCORE" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>score</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    </When>
  <Then>
      <step> User has profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User has subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User is unsubscribed in subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>unsubscrib</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> Refresh cache</step>
      <step-keywords>
        <keyword>refresh</keyword>
        <keyword>cach</keyword>
      </step-keywords>
    <step> Sms is being processed by the "INVALID_REQUEST" request</step>
      <step-keywords>
        <keyword>request</keyword>
        <keyword>sm</keyword>
        <keyword>be</keyword>
        <keyword>process</keyword>
        <keyword>invalid</keyword>
      </step-keywords>
    <step> User receives the "INVALID_REQUEST" reply from free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>invalid</keyword>
        <keyword>request</keyword>
        <keyword>repli</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User receives the following texts/response types from free short code ordered by event time:</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>follow</keyword>
        <keyword>text</keyword>
        <keyword>respons</keyword>
        <keyword>type</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>order</keyword>
        <keyword>event</keyword>
        <keyword>time</keyword>
      </step-keywords>
    </Then>
  </scenario>
<scenario feature="Subscription Opt-out test cases" title="Unsubscribed user sends YES keyword with no active subscription">
    <Given>
      <step> Edit campaign "TelekomCampaign" begin on "10/10/2015 22:23:15" and ends on "10/11/2027 22:23:15" with langCode "sq"</step>
      <step-keywords>
        <keyword>10</keyword>
        <keyword>22</keyword>
        <keyword>23</keyword>
        <keyword>15</keyword>
        <keyword>edit</keyword>
        <keyword>campaign</keyword>
        <keyword>telekomcampaign</keyword>
        <keyword>begin</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>11</keyword>
        <keyword>2027</keyword>
        <keyword>langcod</keyword>
        <keyword>sq</keyword>
      </step-keywords>
      <step> Edit subscription "PersonalitySubscription" with id "PersonalitySubscription" starts on "01/01/2015 00:00:00" and ends on "01/01/2020 00:00:00" with "7" free days and welcome message from free shorcode</step>
      <step-keywords>
        <keyword>00</keyword>
        <keyword>01</keyword>
        <keyword>personalitysubscript</keyword>
        <keyword>free</keyword>
        <keyword>edit</keyword>
        <keyword>subscript</keyword>
        <keyword>id</keyword>
        <keyword>start</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>2020</keyword>
        <keyword>7</keyword>
        <keyword>dai</keyword>
        <keyword>welcom</keyword>
        <keyword>messag</keyword>
        <keyword>from</keyword>
        <keyword>shorcod</keyword>
      </step-keywords>
      <step> Sms free short code is "55577"</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>55577</keyword>
      </step-keywords>
      <step> User has "355004567837" msisdn</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>355004567837</keyword>
        <keyword>msisdn</keyword>
      </step-keywords>
    <step> User has no profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    </Given>
  <When>
      <step> User sends sms with input "YES" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>ye</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User sends sms with input "STOP" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>stop</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> Inactive subscription "PersonalitySubscription" with id "PersonalitySubscription" starts on "01/01/2015 00:00:00" and ends on "01/01/2020 00:00:00" with "0" free days and welcome message from free shorcode</step>
      <step-keywords>
        <keyword>00</keyword>
        <keyword>01</keyword>
        <keyword>personalitysubscript</keyword>
        <keyword>free</keyword>
        <keyword>inact</keyword>
        <keyword>subscript</keyword>
        <keyword>id</keyword>
        <keyword>start</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>2020</keyword>
        <keyword>0</keyword>
        <keyword>dai</keyword>
        <keyword>welcom</keyword>
        <keyword>messag</keyword>
        <keyword>from</keyword>
        <keyword>shorcod</keyword>
      </step-keywords>
    <step> User sends sms with input "YES" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>ye</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    </When>
  <Then>
      <step> User has profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User has subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User is unsubscribed in subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>unsubscrib</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> Refresh cache</step>
      <step-keywords>
        <keyword>refresh</keyword>
        <keyword>cach</keyword>
      </step-keywords>
    <step> Sms is being processed by the "INVALID_REQUEST" request</step>
      <step-keywords>
        <keyword>request</keyword>
        <keyword>sm</keyword>
        <keyword>be</keyword>
        <keyword>process</keyword>
        <keyword>invalid</keyword>
      </step-keywords>
    <step> User receives the "INVALID_REQUEST" reply from free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>invalid</keyword>
        <keyword>request</keyword>
        <keyword>repli</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User receives the following texts/response types from free short code ordered by event time:</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>follow</keyword>
        <keyword>text</keyword>
        <keyword>respons</keyword>
        <keyword>type</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>order</keyword>
        <keyword>event</keyword>
        <keyword>time</keyword>
      </step-keywords>
    </Then>
  </scenario>
<scenario feature="Subscription Opt-out test cases" title="Unsubscribed user sends anything with no active subscription">
    <Given>
      <step> Edit campaign "TelekomCampaign" begin on "10/10/2015 22:23:15" and ends on "10/11/2027 22:23:15" with langCode "sq"</step>
      <step-keywords>
        <keyword>10</keyword>
        <keyword>22</keyword>
        <keyword>23</keyword>
        <keyword>15</keyword>
        <keyword>edit</keyword>
        <keyword>campaign</keyword>
        <keyword>telekomcampaign</keyword>
        <keyword>begin</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>11</keyword>
        <keyword>2027</keyword>
        <keyword>langcod</keyword>
        <keyword>sq</keyword>
      </step-keywords>
      <step> Edit subscription "PersonalitySubscription" with id "PersonalitySubscription" starts on "01/01/2015 00:00:00" and ends on "01/01/2020 00:00:00" with "7" free days and welcome message from free shorcode</step>
      <step-keywords>
        <keyword>00</keyword>
        <keyword>01</keyword>
        <keyword>personalitysubscript</keyword>
        <keyword>free</keyword>
        <keyword>edit</keyword>
        <keyword>subscript</keyword>
        <keyword>id</keyword>
        <keyword>start</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>2020</keyword>
        <keyword>7</keyword>
        <keyword>dai</keyword>
        <keyword>welcom</keyword>
        <keyword>messag</keyword>
        <keyword>from</keyword>
        <keyword>shorcod</keyword>
      </step-keywords>
      <step> Sms free short code is "55577"</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>55577</keyword>
      </step-keywords>
      <step> User has "355004567838" msisdn</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>355004567838</keyword>
        <keyword>msisdn</keyword>
      </step-keywords>
    <step> User has no profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    </Given>
  <When>
      <step> User sends sms with input "YES" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>ye</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User sends sms with input "STOP" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>stop</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> Inactive subscription "PersonalitySubscription" with id "PersonalitySubscription" starts on "01/01/2015 00:00:00" and ends on "01/01/2020 00:00:00" with "0" free days and welcome message from free shorcode</step>
      <step-keywords>
        <keyword>00</keyword>
        <keyword>01</keyword>
        <keyword>personalitysubscript</keyword>
        <keyword>free</keyword>
        <keyword>inact</keyword>
        <keyword>subscript</keyword>
        <keyword>id</keyword>
        <keyword>start</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>2020</keyword>
        <keyword>0</keyword>
        <keyword>dai</keyword>
        <keyword>welcom</keyword>
        <keyword>messag</keyword>
        <keyword>from</keyword>
        <keyword>shorcod</keyword>
      </step-keywords>
    <step> User sends sms with input "ANYTHING" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>anyth</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    </When>
  <Then>
      <step> User has profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User has subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User is unsubscribed in subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>unsubscrib</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> Refresh cache</step>
      <step-keywords>
        <keyword>refresh</keyword>
        <keyword>cach</keyword>
      </step-keywords>
    <step> Sms is being processed by the "INVALID_REQUEST" request</step>
      <step-keywords>
        <keyword>request</keyword>
        <keyword>sm</keyword>
        <keyword>be</keyword>
        <keyword>process</keyword>
        <keyword>invalid</keyword>
      </step-keywords>
    <step> User receives the "INVALID_REQUEST" reply from free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>invalid</keyword>
        <keyword>request</keyword>
        <keyword>repli</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User receives the following texts/response types from free short code ordered by event time:</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>follow</keyword>
        <keyword>text</keyword>
        <keyword>respons</keyword>
        <keyword>type</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>order</keyword>
        <keyword>event</keyword>
        <keyword>time</keyword>
      </step-keywords>
    </Then>
  </scenario>
<scenario feature="Subscription Opt-out test cases" title="Unsubscribed user sends &quot;1&quot; with no active subscription">
    <Given>
      <step> Edit campaign "TelekomCampaign" begin on "10/10/2015 22:23:15" and ends on "10/11/2027 22:23:15" with langCode "sq"</step>
      <step-keywords>
        <keyword>10</keyword>
        <keyword>22</keyword>
        <keyword>23</keyword>
        <keyword>15</keyword>
        <keyword>edit</keyword>
        <keyword>campaign</keyword>
        <keyword>telekomcampaign</keyword>
        <keyword>begin</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>11</keyword>
        <keyword>2027</keyword>
        <keyword>langcod</keyword>
        <keyword>sq</keyword>
      </step-keywords>
      <step> Edit subscription "PersonalitySubscription" with id "PersonalitySubscription" starts on "01/01/2015 00:00:00" and ends on "01/01/2020 00:00:00" with "7" free days and welcome message from free shorcode</step>
      <step-keywords>
        <keyword>00</keyword>
        <keyword>01</keyword>
        <keyword>personalitysubscript</keyword>
        <keyword>free</keyword>
        <keyword>edit</keyword>
        <keyword>subscript</keyword>
        <keyword>id</keyword>
        <keyword>start</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>2020</keyword>
        <keyword>7</keyword>
        <keyword>dai</keyword>
        <keyword>welcom</keyword>
        <keyword>messag</keyword>
        <keyword>from</keyword>
        <keyword>shorcod</keyword>
      </step-keywords>
      <step> Sms free short code is "55577"</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>55577</keyword>
      </step-keywords>
      <step> User has "355004567845" msisdn</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>355004567845</keyword>
        <keyword>msisdn</keyword>
      </step-keywords>
    <step> User has no profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    </Given>
  <When>
      <step> User sends sms with input "YES" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>ye</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User sends sms with input "STOP" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>stop</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> Inactive subscription "PersonalitySubscription" with id "PersonalitySubscription" starts on "01/01/2015 00:00:00" and ends on "01/01/2016 00:00:00" with "0" free days and welcome message from free shorcode</step>
      <step-keywords>
        <keyword>00</keyword>
        <keyword>01</keyword>
        <keyword>personalitysubscript</keyword>
        <keyword>free</keyword>
        <keyword>inact</keyword>
        <keyword>subscript</keyword>
        <keyword>id</keyword>
        <keyword>start</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>2016</keyword>
        <keyword>0</keyword>
        <keyword>dai</keyword>
        <keyword>welcom</keyword>
        <keyword>messag</keyword>
        <keyword>from</keyword>
        <keyword>shorcod</keyword>
      </step-keywords>
    <step> User sends sms with input "1" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>1</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    </When>
  <Then>
      <step> User has profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User has subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User is unsubscribed in subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>unsubscrib</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> Refresh cache</step>
      <step-keywords>
        <keyword>refresh</keyword>
        <keyword>cach</keyword>
      </step-keywords>
    <step> Sms is being processed by the "INVALID_REQUEST" request</step>
      <step-keywords>
        <keyword>request</keyword>
        <keyword>sm</keyword>
        <keyword>be</keyword>
        <keyword>process</keyword>
        <keyword>invalid</keyword>
      </step-keywords>
    <step> User receives the "INVALID_REQUEST" reply from free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>invalid</keyword>
        <keyword>request</keyword>
        <keyword>repli</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User receives the following texts/response types from free short code ordered by event time:</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>follow</keyword>
        <keyword>text</keyword>
        <keyword>respons</keyword>
        <keyword>type</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>order</keyword>
        <keyword>event</keyword>
        <keyword>time</keyword>
      </step-keywords>
    </Then>
  </scenario>
<scenario feature="Subscription Opt-out test cases" title="Unsubscribed user sends &quot;2&quot; with no active subscription">
    <Given>
      <step> Edit campaign "TelekomCampaign" begin on "10/10/2015 22:23:15" and ends on "10/11/2027 22:23:15" with langCode "sq"</step>
      <step-keywords>
        <keyword>10</keyword>
        <keyword>22</keyword>
        <keyword>23</keyword>
        <keyword>15</keyword>
        <keyword>edit</keyword>
        <keyword>campaign</keyword>
        <keyword>telekomcampaign</keyword>
        <keyword>begin</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>11</keyword>
        <keyword>2027</keyword>
        <keyword>langcod</keyword>
        <keyword>sq</keyword>
      </step-keywords>
      <step> Edit subscription "PersonalitySubscription" with id "PersonalitySubscription" starts on "01/01/2015 00:00:00" and ends on "01/01/2020 00:00:00" with "7" free days and welcome message from free shorcode</step>
      <step-keywords>
        <keyword>00</keyword>
        <keyword>01</keyword>
        <keyword>personalitysubscript</keyword>
        <keyword>free</keyword>
        <keyword>edit</keyword>
        <keyword>subscript</keyword>
        <keyword>id</keyword>
        <keyword>start</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>2020</keyword>
        <keyword>7</keyword>
        <keyword>dai</keyword>
        <keyword>welcom</keyword>
        <keyword>messag</keyword>
        <keyword>from</keyword>
        <keyword>shorcod</keyword>
      </step-keywords>
      <step> Sms free short code is "55577"</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>55577</keyword>
      </step-keywords>
      <step> User has "355004567846" msisdn</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>355004567846</keyword>
        <keyword>msisdn</keyword>
      </step-keywords>
    <step> User has no profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    </Given>
  <When>
      <step> User sends sms with input "YES" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>ye</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User sends sms with input "STOP" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>stop</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> Inactive subscription "PersonalitySubscription" with id "PersonalitySubscription" starts on "01/01/2015 00:00:00" and ends on "01/01/2016 00:00:00" with "0" free days and welcome message from free shorcode</step>
      <step-keywords>
        <keyword>00</keyword>
        <keyword>01</keyword>
        <keyword>personalitysubscript</keyword>
        <keyword>free</keyword>
        <keyword>inact</keyword>
        <keyword>subscript</keyword>
        <keyword>id</keyword>
        <keyword>start</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>2016</keyword>
        <keyword>0</keyword>
        <keyword>dai</keyword>
        <keyword>welcom</keyword>
        <keyword>messag</keyword>
        <keyword>from</keyword>
        <keyword>shorcod</keyword>
      </step-keywords>
    <step> User sends sms with input "2" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>2</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    </When>
  <Then>
      <step> User has profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User has subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> User is unsubscribed in subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>unsubscrib</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> Refresh cache</step>
      <step-keywords>
        <keyword>refresh</keyword>
        <keyword>cach</keyword>
      </step-keywords>
    <step> Sms is being processed by the "INVALID_REQUEST" request</step>
      <step-keywords>
        <keyword>request</keyword>
        <keyword>sm</keyword>
        <keyword>be</keyword>
        <keyword>process</keyword>
        <keyword>invalid</keyword>
      </step-keywords>
    <step> User receives the "INVALID_REQUEST" reply from free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>invalid</keyword>
        <keyword>request</keyword>
        <keyword>repli</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User receives the following texts/response types from free short code ordered by event time:</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>follow</keyword>
        <keyword>text</keyword>
        <keyword>respons</keyword>
        <keyword>type</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>order</keyword>
        <keyword>event</keyword>
        <keyword>time</keyword>
      </step-keywords>
    </Then>
  </scenario>
<scenario feature="Subscription Opt-out test cases" title="Subscribed user sends optout keyword with active subscription which starts in the future">
    <Given>
      <step> Edit campaign "TelekomCampaign" begin on "10/10/2015 22:23:15" and ends on "10/11/2027 22:23:15" with langCode "sq"</step>
      <step-keywords>
        <keyword>10</keyword>
        <keyword>22</keyword>
        <keyword>23</keyword>
        <keyword>15</keyword>
        <keyword>edit</keyword>
        <keyword>campaign</keyword>
        <keyword>telekomcampaign</keyword>
        <keyword>begin</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>11</keyword>
        <keyword>2027</keyword>
        <keyword>langcod</keyword>
        <keyword>sq</keyword>
      </step-keywords>
      <step> Edit subscription "PersonalitySubscription" with id "PersonalitySubscription" starts on "01/01/2015 00:00:00" and ends on "01/01/2020 00:00:00" with "7" free days and welcome message from free shorcode</step>
      <step-keywords>
        <keyword>00</keyword>
        <keyword>01</keyword>
        <keyword>personalitysubscript</keyword>
        <keyword>free</keyword>
        <keyword>edit</keyword>
        <keyword>subscript</keyword>
        <keyword>id</keyword>
        <keyword>start</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>2020</keyword>
        <keyword>7</keyword>
        <keyword>dai</keyword>
        <keyword>welcom</keyword>
        <keyword>messag</keyword>
        <keyword>from</keyword>
        <keyword>shorcod</keyword>
      </step-keywords>
      <step> Sms free short code is "55577"</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>55577</keyword>
      </step-keywords>
      <step> User has "355004567100" msisdn</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>355004567100</keyword>
        <keyword>msisdn</keyword>
      </step-keywords>
    <step> User has no profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    </Given>
  <When>
      <step> User sends sms with input "YES" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>ye</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> Edit subscription "PersonalitySubscription" with id "PersonalitySubscription" starts on "01/01/2018 00:00:00" and ends on "01/01/2019 00:00:00" with "7" free days and welcome message from free shorcode</step>
      <step-keywords>
        <keyword>00</keyword>
        <keyword>01</keyword>
        <keyword>personalitysubscript</keyword>
        <keyword>free</keyword>
        <keyword>edit</keyword>
        <keyword>subscript</keyword>
        <keyword>id</keyword>
        <keyword>start</keyword>
        <keyword>2018</keyword>
        <keyword>end</keyword>
        <keyword>2019</keyword>
        <keyword>7</keyword>
        <keyword>dai</keyword>
        <keyword>welcom</keyword>
        <keyword>messag</keyword>
        <keyword>from</keyword>
        <keyword>shorcod</keyword>
      </step-keywords>
    <step> Refresh cache</step>
      <step-keywords>
        <keyword>refresh</keyword>
        <keyword>cach</keyword>
      </step-keywords>
    <step> User sends sms with input "STOP" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>stop</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    </When>
  <Then>
      <step> User has subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> Sms is being processed by the "PRE_LAUNCH" request</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>be</keyword>
        <keyword>process</keyword>
        <keyword>pre</keyword>
        <keyword>launch</keyword>
        <keyword>request</keyword>
      </step-keywords>
    <step> User receives the "RESPONSE_SUBSCRIPTION_SERVICE" reply from free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>respons</keyword>
        <keyword>subscript</keyword>
        <keyword>servic</keyword>
        <keyword>repli</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User receives the following texts/response types from free short code ordered by event time:</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>follow</keyword>
        <keyword>text</keyword>
        <keyword>respons</keyword>
        <keyword>type</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>order</keyword>
        <keyword>event</keyword>
        <keyword>time</keyword>
      </step-keywords>
    </Then>
  </scenario>
<scenario feature="Subscription Opt-out test cases" title="Subscribed user sends optout keyword with active subscription which has expired">
    <Given>
      <step> Edit campaign "TelekomCampaign" begin on "10/10/2015 22:23:15" and ends on "10/11/2027 22:23:15" with langCode "sq"</step>
      <step-keywords>
        <keyword>10</keyword>
        <keyword>22</keyword>
        <keyword>23</keyword>
        <keyword>15</keyword>
        <keyword>edit</keyword>
        <keyword>campaign</keyword>
        <keyword>telekomcampaign</keyword>
        <keyword>begin</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>11</keyword>
        <keyword>2027</keyword>
        <keyword>langcod</keyword>
        <keyword>sq</keyword>
      </step-keywords>
      <step> Edit subscription "PersonalitySubscription" with id "PersonalitySubscription" starts on "01/01/2015 00:00:00" and ends on "01/01/2020 00:00:00" with "7" free days and welcome message from free shorcode</step>
      <step-keywords>
        <keyword>00</keyword>
        <keyword>01</keyword>
        <keyword>personalitysubscript</keyword>
        <keyword>free</keyword>
        <keyword>edit</keyword>
        <keyword>subscript</keyword>
        <keyword>id</keyword>
        <keyword>start</keyword>
        <keyword>2015</keyword>
        <keyword>end</keyword>
        <keyword>2020</keyword>
        <keyword>7</keyword>
        <keyword>dai</keyword>
        <keyword>welcom</keyword>
        <keyword>messag</keyword>
        <keyword>from</keyword>
        <keyword>shorcod</keyword>
      </step-keywords>
      <step> Sms free short code is "55577"</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>55577</keyword>
      </step-keywords>
      <step> User has "355004567101" msisdn</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>355004567101</keyword>
        <keyword>msisdn</keyword>
      </step-keywords>
    <step> User has no profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    </Given>
  <When>
      <step> User sends sms with input "YES" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>ye</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> Edit subscription "PersonalitySubscription" with id "PersonalitySubscription" starts on "01/01/2010 00:00:00" and ends on "01/01/2014 00:00:00" with "7" free days and welcome message from free shorcode</step>
      <step-keywords>
        <keyword>00</keyword>
        <keyword>01</keyword>
        <keyword>personalitysubscript</keyword>
        <keyword>free</keyword>
        <keyword>edit</keyword>
        <keyword>subscript</keyword>
        <keyword>id</keyword>
        <keyword>start</keyword>
        <keyword>2010</keyword>
        <keyword>end</keyword>
        <keyword>2014</keyword>
        <keyword>7</keyword>
        <keyword>dai</keyword>
        <keyword>welcom</keyword>
        <keyword>messag</keyword>
        <keyword>from</keyword>
        <keyword>shorcod</keyword>
      </step-keywords>
    <step> Refresh cache</step>
      <step-keywords>
        <keyword>refresh</keyword>
        <keyword>cach</keyword>
      </step-keywords>
    <step> User sends sms with input "STOP" to free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>send</keyword>
        <keyword>sm</keyword>
        <keyword>input</keyword>
        <keyword>stop</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    </When>
  <Then>
      <step> User has subscription profile</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>ha</keyword>
        <keyword>subscript</keyword>
        <keyword>profil</keyword>
      </step-keywords>
    <step> Sms is being processed by the "INVALID" request</step>
      <step-keywords>
        <keyword>sm</keyword>
        <keyword>be</keyword>
        <keyword>process</keyword>
        <keyword>invalid</keyword>
        <keyword>request</keyword>
      </step-keywords>
    <step> User receives the "RESPONSE_SUBSCRIPTION_SERVICE" reply from free short code</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>respons</keyword>
        <keyword>subscript</keyword>
        <keyword>servic</keyword>
        <keyword>repli</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
      </step-keywords>
    <step> User receives the following texts/response types from free short code ordered by event time:</step>
      <step-keywords>
        <keyword>user</keyword>
        <keyword>receiv</keyword>
        <keyword>follow</keyword>
        <keyword>text</keyword>
        <keyword>respons</keyword>
        <keyword>type</keyword>
        <keyword>from</keyword>
        <keyword>free</keyword>
        <keyword>short</keyword>
        <keyword>code</keyword>
        <keyword>order</keyword>
        <keyword>event</keyword>
        <keyword>time</keyword>
      </step-keywords>
    </Then>
  </scenario>
</scenarios>
